---
config:
  theme: redux-color
  look: neo
---
sequenceDiagram
    participant Clerk Auth
    participant Server 
    participant DB 

    note over Clerk Auth, Server: triggered by user events in clerk (e.g., user signs up)
    Clerk Auth->>Server: POST /api/webhooks/clerk (with user event payload)
    activate Server
    Server->>Server: validate webhook signature for security
    Server->>DB: create or update user record with clerk data
    activate DB
    DB-->>Server: confirms record update
    deactivate DB
    Server-->>Clerk Auth: returns 200 OK to acknowledge receipt
    deactivate Server